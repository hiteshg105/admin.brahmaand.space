{"version":3,"sources":["extensions/import-export/Import.js","extensions/extensionsHeader.js"],"names":["Uploader","props","_useDropzone","useDropzone","accept","onDrop","acceptedFiles","reader","FileReader","onload","fileData","result","wb","XLSX","read","type","SheetNames","forEach","sheetName","rowObj","utils","sheet_to_row_object_array","Sheets","getTableData","name","length","readAsBinaryString","toast","error","getRootProps","getInputProps","React","createElement","className","DownloadCloud","size","Import","_React$Component","_inherits","_super","_createSuper","_this","_classCallCheck","_len","arguments","args","Array","_key","call","apply","concat","state","tableData","filteredData","value","arr","setState","handleFilter","e","data","target","filter","col","keys","Object","startsWithCondition","key","toString","toLowerCase","startsWith","includesCondition","includes","_createClass","_this2","headArr","this","map","index","_toConsumableArray","dataArr","renderTableBody","renderTd","renderTableHead","head","Fragment","ExtensionsHeader","title","subTitle","link","Row","Col","sm","Card","CardBody","CardHeader","CardTitle","Input","onChange","Search","Table","responsive","ToastContainer","Component","data-tour","href","rel"],"mappings":"kdAqBA,SAASA,EAASC,GAChB,IAAAC,EAAwCC,YAAY,CAClDC,OAAQ,oBACRC,OAAQ,SAAAC,GACN,IAAIC,EAAS,IAAIC,WACjBD,EAAOE,OAAS,WACd,IAAIC,EAAWH,EAAOI,OAClBC,EAAKC,IAAKC,KAAKJ,EAAU,CAAEK,KAAM,WAErCH,EAAGI,WAAWC,SAAQ,SAASC,GAC7B,IAAIC,EAASN,IAAKO,MAAMC,0BACtBT,EAAGU,OAAOJ,IAEZjB,EAAMsB,aAAaJ,EAAQb,EAAc,GAAGkB,UAG5ClB,EAAcmB,OAChBlB,EAAOmB,mBAAmBpB,EAAc,IAExCqB,IAAMC,MAAM,mDAlBVC,EAAY3B,EAAZ2B,aAAcC,EAAa5B,EAAb4B,cAsBtB,OACEC,IAAAC,cAAA,WAASC,UAAU,QACjBF,IAAAC,cAAA,MAASH,EAAa,CAAEI,UAAW,8BACjCF,IAAAC,cAAA,QAAWF,KACXC,IAAAC,cAACE,IAAa,CAACD,UAAU,aAAaE,KAAM,KAC5CJ,IAAAC,cAAA,MAAIC,UAAU,aAAY,+BAIjC,IAEKG,EAAM,SAAAC,GAAAC,YAAAF,EAAAC,GAAA,IAAAE,EAAAC,YAAAJ,GAAA,SAAAA,IAAA,IAAAK,EAAAC,YAAA,KAAAN,GAAA,QAAAO,EAAAC,UAAAnB,OAAAoB,EAAA,IAAAC,MAAAH,GAAAI,EAAA,EAAAA,EAAAJ,EAAAI,IAAAF,EAAAE,GAAAH,UAAAG,GA6CT,OA7CSN,EAAAF,EAAAS,KAAAC,MAAAV,EAAA,OAAAW,OAAAL,KACVM,MAAQ,CACNC,UAAW,GACXC,aAAc,GACdC,MAAO,GACP9B,KAAM,IACPiB,EAEDlB,aAAe,SAACgC,EAAK/B,GACnBiB,EAAKe,SAAS,CAAEJ,UAAWG,EAAK/B,UACjCiB,EAEDgB,aAAe,SAAAC,GACb,IAAIC,EAAOlB,EAAKU,MAAMC,UAClBC,EAAe,GACfC,EAAQI,EAAEE,OAAON,MAGrB,GAFAb,EAAKe,SAAS,CAAEF,WAEZA,EAAM7B,OAyBR,OAAO,KAxBP4B,EAAeM,EAAKE,QAAO,SAAAC,GACzB,IAAIC,EAAOC,OAAOD,KAAKD,GAEnBG,EAAsBF,EAAKF,QAAO,SAAAK,GACpC,OAAOJ,EAAII,GACRC,WACAC,cACAC,WAAWf,EAAMc,kBAGlBE,EAAoBP,EAAKF,QAAO,SAAAK,GAAG,OACrCJ,EAAII,GACDC,WACAC,cACAG,SAASjB,EAAMc,kBAGpB,OAAIH,EAAoBxC,OAAeqC,EAAIG,IACjCA,GAAuBK,EAAkB7C,OAC1CqC,EAAIQ,GACD,QAEd7B,EAAKe,SAAS,CAAEF,QAAOD,kBAI1BZ,EAiFA,OAjFA+B,YAAApC,EAAA,EAAA8B,IAAA,SAAAZ,MAED,WAAU,IAADmB,EAAA,KACHC,EAAUC,KAAKxB,MAAMC,UAAU3B,OAC/BkD,KAAKxB,MAAMC,UAAUwB,KAAI,SAACd,EAAKe,GAC7B,OAAc,IAAVA,EAAaC,YAAWd,OAAOD,KAAKD,IAC5B,QAEd,GACAiB,EAAUJ,KAAKxB,MAAMG,MAAM7B,OAC3BkD,KAAKxB,MAAME,aACXsB,KAAKxB,MAAMC,UAAU3B,SAAWkD,KAAKxB,MAAMG,MAAM7B,OACjDkD,KAAKxB,MAAMC,UACX,KACA4B,EACU,OAAZD,GAAoBA,EAAQtD,OACxBsD,EAAQH,KAAI,SAACd,EAAKe,GAChB,IACII,EADOjB,OAAOD,KAAKD,GACHc,KAAI,SAACV,EAAKW,GAAK,OACjC9C,IAAAC,cAAA,MAAIkC,IAAKW,GAAQf,EAAII,OAEvB,OAAOnC,IAAAC,cAAA,MAAIkC,IAAKW,GAAQI,MAE1B,KAEFC,EAAkBR,EAAQjD,OAC1BiD,EAAQ,GAAGE,KAAI,SAACO,EAAMN,GACpB,OAAO9C,IAAAC,cAAA,MAAIkC,IAAKW,GAAQM,MAE1B,KAEJ,OACEpD,IAAAC,cAACD,IAAMqD,SAAQ,KACbrD,IAAAC,cAACqD,IAAgB,CACfC,MAAM,OACNC,SAAS,8DACTC,KAAK,6CAEPzD,IAAAC,cAACyD,IAAG,CAACxD,UAAU,oBACbF,IAAAC,cAAC0D,IAAG,CAACC,GAAG,MACN5D,IAAAC,cAAC4D,IAAI,KACH7D,IAAAC,cAAC6D,IAAQ,KACP9D,IAAAC,cAACyD,IAAG,KACF1D,IAAAC,cAAC0D,IAAG,CAACC,GAAG,MACN5D,IAAAC,cAAChC,EAAQ,CAACuB,aAAcoD,KAAKpD,oBAMtCoD,KAAKxB,MAAMC,UAAU3B,OACpBM,IAAAC,cAAC0D,IAAG,CAACC,GAAG,MACN5D,IAAAC,cAAC4D,IAAI,KACH7D,IAAAC,cAAC8D,IAAU,CAAC7D,UAAU,qCACpBF,IAAAC,cAAC+D,IAAS,KAAEpB,KAAKxB,MAAM3B,MACvBO,IAAAC,cAAA,OAAKC,UAAU,0CACbF,IAAAC,cAACgE,IAAK,CACJjF,KAAK,OACLuC,MAAOqB,KAAKxB,MAAMG,MAClB2C,SAAU,SAAAvC,GAAC,OAAIe,EAAKhB,aAAaC,MAEnC3B,IAAAC,cAAA,OAAKC,UAAU,yBACbF,IAAAC,cAACkE,IAAM,CAAC/D,KAAM,QAIpBJ,IAAAC,cAAC6D,IAAQ,KACP9D,IAAAC,cAACmE,IAAK,CAAClE,UAAU,wBAAwBmE,YAAU,GACjDrE,IAAAC,cAAA,aACED,IAAAC,cAAA,UAAKkD,IAEPnD,IAAAC,cAAA,aAAQgD,OAKd,KACJjD,IAAAC,cAACqE,IAAc,YAItBjE,EA9HS,CAASL,IAAMuE,WAiIZlE,a,yGCpLTiD,EAAgB,SAAAhD,GAAAC,YAAA+C,EAAAhD,GAAA,IAAAE,EAAAC,YAAA6C,GAAA,SAAAA,IAAA,OAAA3C,YAAA,KAAA2C,GAAA9C,EAAAU,MAAA,KAAAL,WAkBnB,OAlBmB4B,YAAAa,EAAA,EAAAnB,IAAA,SAAAZ,MACpB,WACE,OACEvB,IAAAC,cAACyD,IAAG,CAACxD,UAAU,QACbF,IAAAC,cAAC0D,IAAG,CAACC,GAAG,KAAK1D,UAAU,SACrBF,IAAAC,cAAA,KACEC,UAAU,qCACVsE,YAAU,mBAET5B,KAAK1E,MAAMqF,OAEbX,KAAK1E,MAAMuF,KAAOzD,IAAAC,cAAA,KAAGwE,KAAM7B,KAAK1E,MAAMuF,KAAM5B,OAAO,SAAS6C,IAAI,uBAC9D9B,KAAK1E,MAAMsF,UACPxD,IAAAC,cAAA,KAAGC,UAAU,gBAAgB0C,KAAK1E,MAAMsF,gBAKtDF,EAlBmB,CAAStD,IAAMuE,WAoBtBjB,O","file":"static/js/69.f3f258bb.chunk.js","sourcesContent":["import React from \"react\"\r\nimport ExtensionsHeader from \"../extensionsHeader\"\r\nimport {\r\n  Row,\r\n  Col,\r\n  Card,\r\n  CardBody,\r\n  Table,\r\n  CardHeader,\r\n  CardTitle,\r\n  Input\r\n} from \"reactstrap\"\r\nimport XLSX from \"xlsx\"\r\nimport { DownloadCloud, Search } from \"react-feather\"\r\nimport { useDropzone } from \"react-dropzone\"\r\nimport { toast, ToastContainer } from \"react-toastify\"\r\n\r\nimport \"react-toastify/dist/ReactToastify.css\"\r\nimport \"../../assets/scss/plugins/extensions/toastr.scss\"\r\nimport \"../../assets/scss/plugins/extensions/dropzone.scss\"\r\n\r\nfunction Uploader(props) {\r\n  const { getRootProps, getInputProps } = useDropzone({\r\n    accept: \".xlsx, .xls, .csv\",\r\n    onDrop: acceptedFiles => {\r\n      var reader = new FileReader()\r\n      reader.onload = function() {\r\n        var fileData = reader.result\r\n        var wb = XLSX.read(fileData, { type: \"binary\" })\r\n\r\n        wb.SheetNames.forEach(function(sheetName) {\r\n          var rowObj = XLSX.utils.sheet_to_row_object_array(\r\n            wb.Sheets[sheetName]\r\n          )\r\n          props.getTableData(rowObj, acceptedFiles[0].name)\r\n        })\r\n      }\r\n      if (acceptedFiles.length) {\r\n        reader.readAsBinaryString(acceptedFiles[0])\r\n      } else {\r\n        toast.error(\"You can only upload .xlsx, .xls, .csv Files!\")\r\n      }\r\n    }\r\n  })\r\n  return (\r\n    <section className=\"pb-1\">\r\n      <div {...getRootProps({ className: \"dropzone py-3 flex-column\" })}>\r\n        <input {...getInputProps()} />\r\n        <DownloadCloud className=\"text-light\" size={50} />\r\n        <h4 className=\"mb-0 mt-2\">Drop Excel File or Browse</h4>\r\n      </div>\r\n    </section>\r\n  )\r\n}\r\n\r\nclass Import extends React.Component {\r\n  state = {\r\n    tableData: [],\r\n    filteredData: [],\r\n    value: \"\",\r\n    name: \"\"\r\n  }\r\n\r\n  getTableData = (arr, name) => {\r\n    this.setState({ tableData: arr, name })\r\n  }\r\n\r\n  handleFilter = e => {\r\n    let data = this.state.tableData\r\n    let filteredData = []\r\n    let value = e.target.value\r\n    this.setState({ value })\r\n\r\n    if (value.length) {\r\n      filteredData = data.filter(col => {\r\n        let keys = Object.keys(col)\r\n\r\n        let startsWithCondition = keys.filter(key => {\r\n          return col[key]\r\n            .toString()\r\n            .toLowerCase()\r\n            .startsWith(value.toLowerCase())\r\n        })\r\n\r\n        let includesCondition = keys.filter(key =>\r\n          col[key]\r\n            .toString()\r\n            .toLowerCase()\r\n            .includes(value.toLowerCase())\r\n        )\r\n\r\n        if (startsWithCondition.length) return col[startsWithCondition]\r\n        else if (!startsWithCondition && includesCondition.length)\r\n          return col[includesCondition]\r\n        else return null\r\n      })\r\n      this.setState({ value, filteredData })\r\n    } else {\r\n      return null\r\n    }\r\n  }\r\n\r\n  render() {\r\n    let headArr = this.state.tableData.length\r\n      ? this.state.tableData.map((col, index) => {\r\n          if (index === 0) return [...Object.keys(col)]\r\n          else return null\r\n        })\r\n      : []\r\n    let dataArr = this.state.value.length\r\n      ? this.state.filteredData\r\n      : this.state.tableData.length && !this.state.value.length\r\n      ? this.state.tableData\r\n      : null\r\n    let renderTableBody =\r\n      dataArr !== null && dataArr.length\r\n        ? dataArr.map((col, index) => {\r\n            let keys = Object.keys(col)\r\n            let renderTd = keys.map((key, index) => (\r\n              <td key={index}>{col[key]}</td>\r\n            ))\r\n            return <tr key={index}>{renderTd}</tr>\r\n          })\r\n        : null\r\n\r\n    let renderTableHead = headArr.length\r\n      ? headArr[0].map((head, index) => {\r\n          return <th key={index}>{head}</th>\r\n        })\r\n      : null\r\n\r\n    return (\r\n      <React.Fragment>\r\n        <ExtensionsHeader\r\n          title=\"XLSX\"\r\n          subTitle=\"Xlsx is a parser and writer for various spreadsheet formats\"\r\n          link=\"https://github.com/AdeleD/react-paginate\"\r\n        />\r\n        <Row className=\"import-component\">\r\n          <Col sm=\"12\">\r\n            <Card>\r\n              <CardBody>\r\n                <Row>\r\n                  <Col sm=\"12\">\r\n                    <Uploader getTableData={this.getTableData} />\r\n                  </Col>\r\n                </Row>\r\n              </CardBody>\r\n            </Card>\r\n          </Col>\r\n          {this.state.tableData.length ? (\r\n            <Col sm=\"12\">\r\n              <Card>\r\n                <CardHeader className=\"justify-content-between flex-wrap\">\r\n                  <CardTitle>{this.state.name}</CardTitle>\r\n                  <div className=\"filter position-relative has-icon-left\">\r\n                    <Input\r\n                      type=\"text\"\r\n                      value={this.state.value}\r\n                      onChange={e => this.handleFilter(e)}\r\n                    />\r\n                    <div className=\"form-control-position\">\r\n                      <Search size={15} />\r\n                    </div>\r\n                  </div>\r\n                </CardHeader>\r\n                <CardBody>\r\n                  <Table className=\"table-hover-animation\" responsive>\r\n                    <thead>\r\n                      <tr>{renderTableHead}</tr>\r\n                    </thead>\r\n                    <tbody>{renderTableBody}</tbody>\r\n                  </Table>\r\n                </CardBody>\r\n              </Card>\r\n            </Col>\r\n          ) : null}\r\n          <ToastContainer />\r\n        </Row>\r\n      </React.Fragment>\r\n    )\r\n  }\r\n}\r\n\r\nexport default Import\r\n","import React from \"react\"\r\nimport { Row, Col } from \"reactstrap\"\r\n// import { Star } from \"react-feather\"\r\n\r\nclass ExtensionsHeader extends React.Component {\r\n  render() {\r\n    return (\r\n      <Row className=\"mb-2\">\r\n        <Col sm=\"12\" className=\"ml-50\">\r\n          <p\r\n            className=\"font-medium-5 mt-1 extension-title\"\r\n            data-tour=\"extension-title\"\r\n          >\r\n            {this.props.title}\r\n          </p>\r\n          {this.props.link ? <a href={this.props.link} target=\"_blank\" rel=\"noopener noreferrer\">\r\n            {this.props.subTitle}\r\n          </a> : <p className=\"text-primary\">{this.props.subTitle}</p> \r\n          }\r\n        </Col>\r\n      </Row>\r\n    )\r\n  }\r\n}\r\nexport default ExtensionsHeader\r\n"],"sourceRoot":""}